# MQT — Implementation Plan

**Based on:** Audit Report (2026-01-02)
**Current Score:** 63/100
**Target Score:** 80/100

---

## Summary

The main gaps are test coverage (0%) and technical debt (91 console statements, 1 security vulnerability). Addressing these will raise the health score significantly. The codebase architecture is solid.

---

## Recommended Actions

| Priority | Task | Effort | Relates To |
|----------|------|--------|------------|
| 1 | Fix security vulnerability | 5 min | Critical: npm audit |
| 2 | Add basic test setup | 2-3 hrs | Critical: 0% coverage |
| 3 | Remove/replace console statements | 1-2 hrs | High: 91 statements |
| 4 | Update dependencies | 30 min | High: 14 outdated |
| 5 | Fix ESLint config | 15 min | Medium: Node globals |
| 6 | Complete TODO item | 1-2 hrs | Medium: refinement logic |

---

## Phase 1: Immediate

**Fix Security Vulnerability**

Run `npm audit fix` to patch the high-severity qs vulnerability.

```bash
npm audit fix
```

**Fix ESLint Configuration**

Add Node.js globals to `eslint.config.js` for server files:

```javascript
// Add to eslint.config.js
import globals from 'globals';

export default [
  // ... existing config
  {
    files: ['server/**/*.js'],
    languageOptions: {
      globals: {
        ...globals.node
      }
    }
  }
];
```

---

## Phase 2: Short-term

**Add Test Infrastructure**

1. Install testing dependencies:
```bash
npm install -D vitest @testing-library/react @testing-library/jest-dom jsdom
```

2. Add test script to `package.json`:
```json
{
  "scripts": {
    "test": "vitest",
    "test:coverage": "vitest --coverage"
  }
}
```

3. Create initial test files:
- `src/App.test.jsx` - Basic render test
- `src/components/Uploader.test.jsx` - Upload component tests
- `server/styles.test.js` - Style loading tests

**Replace Console Statements**

Option A: Install a logging library like `pino` for server:
```bash
npm install pino
```

Option B: Create environment-aware logging wrapper:
```javascript
// server/logger.js
const isDev = process.env.NODE_ENV !== 'production';

export const log = {
  info: (...args) => isDev && console.log(...args),
  warn: (...args) => console.warn(...args),
  error: (...args) => console.error(...args)
};
```

**Update Dependencies**

```bash
npm update
npm install cross-env@latest dotenv@latest
```

Note: Express 5.x is a major version change - test thoroughly before upgrading.

---

## Phase 3: Medium-term

**Complete Refinement Logic**

The TODO at `server/index.js:156` indicates incomplete refinement feature. Review requirements and implement.

**Add Component Tests**

Target 60% coverage minimum:
- Test all 9 React components
- Test API service layer
- Test server endpoints

---

## Expected Outcome

| Metric | Before | After |
|--------|--------|-------|
| Health Score | 63 | ~80 |
| Test Coverage | 0% | 60%+ |
| Vulnerabilities | 1 | 0 |
| Console Statements | 91 | <10 |
| Outdated Packages | 14 | 0 |

Completing Phase 1 and 2 will raise the health score from 63 to approximately 80.

---

*Plan generated by Claude (Auditor Skill) — 2026-01-02*
